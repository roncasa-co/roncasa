<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>EC Eligibility Checker</title>
<style>
  body{margin:0;font-family:Inter,system-ui,Arial,sans-serif;background:#f5f5f5}
  .wrap{max-width:560px;margin:20px auto;padding:16px}
  .card{background:#111;color:#fff;border-radius:14px;padding:18px;box-shadow:0 10px 24px rgba(0,0,0,.2)}
  h1{font-size:18px;margin:0 0 6px;color:#fff}
  p{font-size:13px;color:#fff;margin:0 0 16px}

  .q{margin-bottom:16px}
  .q label{display:block;font-size:13px;margin-bottom:8px;color:#fff}

  .options{display:grid;gap:8px}
  .opt{background:#fff;color:#000;border:1px solid #333;border-radius:10px;padding:10px 12px;cursor:pointer;display:flex;align-items:center;gap:10px;user-select:none}
  .opt input{accent-color:#000;pointer-events:none}
  .opt span{color:#000;background:transparent}
  .opt input:checked + span{background:#fff;color:#000}

  .actions{display:flex;justify-content:flex-end;margin-top:12px}
  button{background:#000;color:#fff;border:none;border-radius:999px;padding:8px 16px;font-weight:600;cursor:pointer}
  button:disabled{opacity:.4;cursor:not-allowed}

  .result{margin-top:18px;padding:14px;border-radius:12px;font-size:14px;display:none}
  .yes{background:#357d50;color:#fff}
  .no{background:#ff4d4d;color:#fff}
  .reason{margin-top:6px;font-size:13px;color:#fff}

  .cta{margin-top:12px;font-size:12px;color:#fff;text-align:center}
</style>
</head>
<body>
<div class="wrap">
  <div class="card">
    <h1>EC Eligibility Quick Check</h1>
    <p>Answer a few questions to see if you may be eligible to buy an Executive Condominium.</p>

    <div class="q">
      <label>1. Your household type</label>
      <div class="options">
        <label class="opt"><input type="radio" name="family" value="family"><span>Married / Engaged / With parents or children</span></label>
        <label class="opt"><input type="radio" name="family" value="singles"><span>Two or more singles</span></label>
      </div>
    </div>

    <div class="q">
      <label>2. Citizenship</label>
      <div class="options">
        <label class="opt"><input type="radio" name="citizen" value="ok"><span>At least one Singapore Citizen</span></label>
        <label class="opt"><input type="radio" name="citizen" value="no"><span>No Singapore Citizen</span></label>
      </div>
    </div>

    <div class="q">
      <label>3. Monthly household income</label>
      <div class="options">
        <label class="opt"><input type="radio" name="income" value="ok"><span>$16,000 or below</span></label>
        <label class="opt"><input type="radio" name="income" value="no"><span>Above $16,000</span></label>
      </div>
    </div>

    <div class="q">
      <label>4. Private residential property ownership (now or last 30 months)</label>
      <div class="options">
        <label class="opt"><input type="radio" name="property" value="ok"><span>No private residential property owned or disposed in last 30 months</span></label>
        <label class="opt"><input type="radio" name="property" value="no"><span>Yes, currently own or disposed within last 30 months</span></label>
      </div>
    </div>

    <div class="q">
      <label>5. Interest or ownership in any other property (local or overseas)</label>
      <div class="options">
        <label class="opt"><input type="radio" name="interest" value="ok"><span>No interest or ownership (direct, inherited, trust, nominee, gift)</span></label>
        <label class="opt"><input type="radio" name="interest" value="no"><span>Yes, have interest or ownership in property</span></label>
      </div>
    </div>

    <div class="q">
      <label>6. Previous subsidised housing taken</label>
      <div class="options">
        <label class="opt"><input type="radio" name="subsidy" value="ok"><span>No – never bought HDB, DBSS, EC, or received CPF housing grants</span></label>
        <label class="opt"><input type="radio" name="subsidy" value="warn"><span>Yes – taken ONE housing subsidy (e.g. HDB flat, CPF housing grant, DBSS, or EC)</span></label>
        <label class="opt"><input type="radio" name="subsidy" value="no"><span>Yes – taken TWO housing subsidies (not eligible for EC)</span></label>
      </div>
    </div>

    <div class="actions">
      <button id="finishBtn" disabled>Finish</button>
    </div>

    <div id="result" class="result">
      <strong id="resultTitle"></strong>
      <div id="resultReason" class="reason"></div>
    </div>

    <div class="cta">By Roncasa.co <br> For a more comprehensive check with calculations, please reach out~</div>
  </div>
</div>

<script>
// === Domain lock and eligibility script ===
document.addEventListener('DOMContentLoaded', function() {
  /* Domain Lock */
  (function () {
    const allowedDomains = ['roncasa.co','www.roncasa.co','roncasa.myshopify.com'];
    const ref = document.referrer || (location.ancestorOrigins && location.ancestorOrigins[0]) || '';
    const allowed = allowedDomains.some(d => ref.includes(d));

    if (!allowed) {
      const overlay = document.createElement('div');
      overlay.style.cssText = 'position:fixed;inset:0;z-index:9999;background:#111;display:flex;align-items:center;justify-content:center;font-family:Inter,system-ui,Arial,sans-serif;color:#fff;';
      overlay.innerHTML = `
        <div style="max-width:420px;padding:28px;border-radius:16px;background:#1b1b1b;text-align:center;box-shadow:0 10px 30px rgba(0,0,0,.45)">
          <div style="font-size:22px;font-weight:700;margin-bottom:6px">Roncasa Exclusive Tool</div>
          <div style="font-size:13px;opacity:.85;margin-bottom:14px">
            This interactive EC eligibility checker is exclusively available via Roncasa.
          </div>
          <div style="font-size:12px;opacity:.7">
            Please access this tool directly from <strong>Roncasa.co</strong>
          </div>
        </div>`;
      document.body.appendChild(overlay);
      return; // stop further script execution if not allowed
    }

    // === Eligibility logic ===
    const finishBtn = document.getElementById('finishBtn');
    const result = document.getElementById('result');
    const title = document.getElementById('resultTitle');
    const reason = document.getElementById('resultReason');

    function allAnswered(){
      return ['family','citizen','income','property','interest','subsidy'].every(n=>document.querySelector(`input[name=${n}]:checked`));
    }

    document.addEventListener('change',()=>{finishBtn.disabled = !allAnswered();});

    finishBtn.addEventListener('click',()=>{
      const fail = [];
      if(document.querySelector('input[name=citizen]:checked').value==='no') fail.push('At least one applicant must be a Singapore Citizen.');
      if(document.querySelector('input[name=income]:checked').value==='no') fail.push('Household income exceeds the $16,000 ceiling.');
      if(document.querySelector('input[name=property]:checked').value==='no') fail.push('Ownership or recent disposal of private residential property disqualifies EC eligibility.');
      if(document.querySelector('input[name=interest]:checked').value==='no') fail.push('Interest or ownership in other local or overseas property may disqualify EC eligibility.');
      if(document.querySelector('input[name=subsidy]:checked').value==='no') fail.push('Households that have taken two housing subsidies are not eligible for an EC.');

      result.style.display='block';

      if(fail.length){
        result.className='result no';
        title.textContent='Not Eligible (Based on inputs)';
        reason.innerHTML=fail.map(r=>`• ${r}`).join('<br>');
      }else{
        result.className='result yes';
        title.textContent='Likely Eligible (Subject to documents)';
        if(document.querySelector('input[name=subsidy]:checked').value==='warn'){
          reason.textContent='You appear eligible, but resale levy may apply due to a previous housing subsidy.';
        }else{
          reason.textContent='Your responses meet the key EC eligibility conditions.';
        }
      }
    });

  })();
});
</script>
</body>
</html>
